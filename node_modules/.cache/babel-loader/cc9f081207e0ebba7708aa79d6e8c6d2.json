{"ast":null,"code":"import { action, computed, makeObservable, observable } from \"mobx\";\nimport React from \"react\";\n\nclass TaskStore {\n  get remainingCount() {\n    return this.tasksFiltered.filter(task => !task.isComplete).length;\n  }\n\n  get isAllCompleted() {\n    return this.remainingCount === 0;\n  }\n\n  get completedCount() {\n    return this.tasksFiltered.filter(task => task.isComplete).length;\n  }\n\n  get tasksFiltered() {\n    if (this.filter === \"all\") {\n      return this.tasks.filter(task => !task.deleted);\n    } else if (this.filter === \"active\") {\n      return this.tasks.filter(task => !task.isComplete && !task.deleted);\n    } else if (this.filter === \"completed\") {\n      return this.tasks.filter(task => task.isComplete && !task.deleted);\n    } else if (this.filter === \"deleted\") {\n      return this.tasks.filter(task => task.deleted);\n    }\n\n    return this.tasks;\n  }\n\n  constructor() {\n    this.idForNewTask = 3;\n    this.filter = \"all\";\n    this.newTaskInput = /*#__PURE__*/React.createRef();\n    this.tasks = [{\n      id: 1,\n      title: \"First Task from MobX\",\n      isComplete: false,\n      editing: false,\n      deleted: false\n    }, {\n      id: 2,\n      title: \"Second Task from MobX\",\n      isComplete: false,\n      editing: false,\n      d: false\n    }];\n\n    this.addTask = event => {\n      if (event.key === \"Enter\") {\n        const newTaskTitle = this.newTaskInput.current.value;\n        if (newTaskTitle.trim().length === 0) return;\n        this.tasks.push({\n          id: this.idForNewTask,\n          title: newTaskTitle,\n          isComplete: false,\n          editing: false,\n          deleted: false\n        });\n        this.idForNewTask++; // let tasks = [...this.state.tasks];\n        // let idForNewTask = this.state.idForNewTask + 1;\n        // tasks.push({\n        // \tid: idForNewTask,\n        // \ttitle: newTaskTitle,\n        // \tisComplete: false,\n        // \tediting: false,\n        // });\n        // this.setState({ tasks, idForNewTask });\n\n        this.newTaskInput.current.value = \"\";\n      }\n    };\n\n    this.deleteTask = task => {\n      task.deleted = !task.deleted;\n      let index = this.tasks.findIndex(t => t.id === task.id);\n      this.tasks.splice(index, 1, task);\n    };\n\n    this.completeTask = task => {\n      task.isComplete = !task.isComplete;\n      let index = this.tasks.findIndex(t => t.id === task.id);\n      this.tasks.splice(index, 1, task);\n    };\n\n    this.changeTaskEditing = task => {\n      task.editing = !task.editing;\n      let index = this.tasks.findIndex(t => t.id === task.id);\n      this.tasks.splice(index, 1, task);\n    };\n\n    this.doneEdit = (task, event) => {\n      event.persist();\n      task.editing = false;\n      let newTitle = event.target.value;\n      if (newTitle.trim().length !== 0) task.title = newTitle;\n      let index = this.tasks.findIndex(t => t.id === task.id);\n      this.tasks.splice(index, 1, task);\n    };\n\n    this.doneEditOnOtherKeys = (task, event) => {\n      if (event.key === \"Enter\") {\n        this.doneEdit(task, event);\n      } else if (event.key === \"Escape\") {\n        this.changeTaskEditing(task);\n      }\n    };\n\n    this.clearCompleted = () => {\n      this.tasks = this.tasks.filter(task => !task.isComplete);\n    };\n\n    this.updateFilter = filter => {\n      this.filter = filter;\n    };\n\n    this.completeAllTasks = event => {\n      //event.persist();\n      this.tasks.forEach(task => task.isComplete = event.target.checked);\n    };\n\n    makeObservable(this, {\n      idForNewTask: observable,\n      filter: observable,\n      tasks: observable,\n      addTask: action,\n      deleteTask: action,\n      completeTask: action,\n      changeTaskEditing: action,\n      doneEdit: action,\n      doneEditOnOtherKeys: action,\n      remainingCount: computed,\n      isAllCompleted: computed,\n      completedCount: computed,\n      clearCompleted: action,\n      updateFilter: action,\n      tasksFiltered: computed,\n      completeAllTasks: action\n    });\n  }\n\n}\n\nconst store = new TaskStore();\nexport default store;","map":{"version":3,"sources":["/Users/barihossain/Sites/react-todo/src/stores/TaskStore.js"],"names":["action","computed","makeObservable","observable","React","TaskStore","remainingCount","tasksFiltered","filter","task","isComplete","length","isAllCompleted","completedCount","tasks","deleted","constructor","idForNewTask","newTaskInput","createRef","id","title","editing","d","addTask","event","key","newTaskTitle","current","value","trim","push","deleteTask","index","findIndex","t","splice","completeTask","changeTaskEditing","doneEdit","persist","newTitle","target","doneEditOnOtherKeys","clearCompleted","updateFilter","completeAllTasks","forEach","checked","store"],"mappings":"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","sourcesContent":["import { action, computed, makeObservable, observable } from \"mobx\";\nimport React from \"react\";\n\nclass TaskStore {\n\tidForNewTask = 3;\n\tfilter = \"all\";\n\tnewTaskInput = React.createRef();\n\ttasks = [\n\t\t{\n\t\t\tid: 1,\n\t\t\ttitle: \"First Task from MobX\",\n\t\t\tisComplete: false,\n\t\t\tediting: false,\n\t\t\tdeleted: false,\n\t\t},\n\t\t{\n\t\t\tid: 2,\n\t\t\ttitle: \"Second Task from MobX\",\n\t\t\tisComplete: false,\n\t\t\tediting: false,\n\t\t\td: false,\n\t\t},\n\t];\n\n\taddTask = (event) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\tconst newTaskTitle = this.newTaskInput.current.value;\n\n\t\t\tif (newTaskTitle.trim().length === 0) return;\n\n\t\t\tthis.tasks.push({\n\t\t\t\tid: this.idForNewTask,\n\t\t\t\ttitle: newTaskTitle,\n\t\t\t\tisComplete: false,\n\t\t\t\tediting: false,\n\t\t\t\tdeleted: false,\n\t\t\t});\n\n\t\t\tthis.idForNewTask++;\n\n\t\t\t// let tasks = [...this.state.tasks];\n\t\t\t// let idForNewTask = this.state.idForNewTask + 1;\n\t\t\t// tasks.push({\n\t\t\t// \tid: idForNewTask,\n\t\t\t// \ttitle: newTaskTitle,\n\t\t\t// \tisComplete: false,\n\t\t\t// \tediting: false,\n\t\t\t// });\n\n\t\t\t// this.setState({ tasks, idForNewTask });\n\n\t\t\tthis.newTaskInput.current.value = \"\";\n\t\t}\n\t};\n\n\tdeleteTask = (task) => {\n\t\ttask.deleted = !task.deleted;\n\t\tlet index = this.tasks.findIndex((t) => t.id === task.id);\n\n\t\tthis.tasks.splice(index, 1, task);\n\t};\n\n\tcompleteTask = (task) => {\n\t\ttask.isComplete = !task.isComplete;\n\t\tlet index = this.tasks.findIndex((t) => t.id === task.id);\n\n\t\tthis.tasks.splice(index, 1, task);\n\t};\n\n\tchangeTaskEditing = (task) => {\n\t\ttask.editing = !task.editing;\n\n\t\tlet index = this.tasks.findIndex((t) => t.id === task.id);\n\n\t\tthis.tasks.splice(index, 1, task);\n\t};\n\n\tdoneEdit = (task, event) => {\n\t\tevent.persist();\n\t\ttask.editing = false;\n\t\tlet newTitle = event.target.value;\n\n\t\tif (newTitle.trim().length !== 0) task.title = newTitle;\n\n\t\tlet index = this.tasks.findIndex((t) => t.id === task.id);\n\n\t\tthis.tasks.splice(index, 1, task);\n\t};\n\n\tdoneEditOnOtherKeys = (task, event) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\tthis.doneEdit(task, event);\n\t\t} else if (event.key === \"Escape\") {\n\t\t\tthis.changeTaskEditing(task);\n\t\t}\n\t};\n\n\tclearCompleted = () => {\n\t\tthis.tasks = this.tasks.filter((task) => !task.isComplete);\n\t};\n\n\tupdateFilter = (filter) => {\n\t\tthis.filter = filter;\n\t};\n\n\tcompleteAllTasks = (event) => {\n\t\t//event.persist();\n\t\tthis.tasks.forEach((task) => (task.isComplete = event.target.checked));\n\t};\n\n\tget remainingCount() {\n\t\treturn this.tasksFiltered.filter((task) => !task.isComplete).length;\n\t}\n\n\tget isAllCompleted() {\n\t\treturn this.remainingCount === 0;\n\t}\n\n\tget completedCount() {\n\t\treturn this.tasksFiltered.filter((task) => task.isComplete).length;\n\t}\n\n\tget tasksFiltered() {\n\t\tif (this.filter === \"all\") {\n\t\t\treturn this.tasks.filter((task) => !task.deleted);\n\t\t} else if (this.filter === \"active\") {\n\t\t\treturn this.tasks.filter(\n\t\t\t\t(task) => !task.isComplete && !task.deleted\n\t\t\t);\n\t\t} else if (this.filter === \"completed\") {\n\t\t\treturn this.tasks.filter((task) => task.isComplete && !task.deleted);\n\t\t} else if (this.filter === \"deleted\") {\n\t\t\treturn this.tasks.filter((task) => task.deleted);\n\t\t}\n\n\t\treturn this.tasks;\n\t}\n\n\tconstructor() {\n\t\tmakeObservable(this, {\n\t\t\tidForNewTask: observable,\n\t\t\tfilter: observable,\n\t\t\ttasks: observable,\n\t\t\taddTask: action,\n\t\t\tdeleteTask: action,\n\t\t\tcompleteTask: action,\n\t\t\tchangeTaskEditing: action,\n\t\t\tdoneEdit: action,\n\t\t\tdoneEditOnOtherKeys: action,\n\t\t\tremainingCount: computed,\n\t\t\tisAllCompleted: computed,\n\t\t\tcompletedCount: computed,\n\t\t\tclearCompleted: action,\n\t\t\tupdateFilter: action,\n\t\t\ttasksFiltered: computed,\n\t\t\tcompleteAllTasks: action,\n\t\t});\n\t}\n}\n\nconst store = new TaskStore();\n\nexport default store;\n"]},"metadata":{},"sourceType":"module"}